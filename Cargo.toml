[package]
name = "static_init"
version = "0.4.2"
authors = ["Olivier Kannengieser <okannen@gmail.com>"]
edition = "2018"
description = "Code execution during program initialization/termination phases and non const static initialization (and drop)"
keywords = ["no_std","utility","static","constructor","initialization"]
categories = ["no-std","os"]
repository = "https://gitlab.com/okannen/static_init"
license = "MIT OR Apache-2.0"

[workspace]
members = [
      "static_init_macro",
      ]

[features]
lazy = ["static_init_macro/lazy","parking_lot"]
atexit = ["libc","static_init_macro/atexit"]
debug_lazy = ["lazy","parking_lot/deadlock_detection"]
debug_core = []
debug_order = ["debug_core","debug_lazy"]
test_thread_local = ["lazy"]
default = ["lazy","atexit","test_thread_local"]

[dependencies]
libc = {version = "0.2", optional=true}
parking_lot = {version = "0.11", optional=true}

[dependencies.static_init_macro]
version="0.4.2"
path="static_init_macro"

[dev-dependencies]
lazy_static = "1.4"
ctor = "0.1"
libc = "0.2"

[profile.bench]
lto = true

[profile.dev]
panic="abort"
